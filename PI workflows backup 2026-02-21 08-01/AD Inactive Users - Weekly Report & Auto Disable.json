{
  "updatedAt": "2026-02-20T12:46:21.732Z",
  "createdAt": "2026-02-20T10:59:54.704Z",
  "id": "D5gpGPiDZNKHYBCN",
  "name": "AD Inactive Users - Weekly Report & Auto Disable",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "inactive-users-report",
        "options": {}
      },
      "id": "12137e81-5512-4870-acdf-4bae49c74ff8",
      "name": "Webhook - Receive Report",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -512,
        -32
      ],
      "webhookId": "inactive-users-report"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "verify-secret",
              "leftValue": "={{ $json.body.secret }}",
              "rightValue": "n8w-GmC9x$kQ2vLpR7fT4bYe!Aj6Xs8Z",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "81071f86-e1e7-4015-bf9c-dde85157591a",
      "name": "Verify Secret",
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2,
      "position": [
        -272,
        -32
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "total",
              "name": "totalInactive",
              "value": "={{ $json.body.totalInactive }}",
              "type": "number"
            },
            {
              "id": "users",
              "name": "inactiveUsers",
              "value": "={{ JSON.stringify($json.body.inactiveUsers) }}",
              "type": "string"
            },
            {
              "id": "scan-date",
              "name": "scanDate",
              "value": "={{ $json.body.scanDate }}",
              "type": "string"
            },
            {
              "id": "search-base",
              "name": "searchBase",
              "value": "={{ $json.body.searchBase }}",
              "type": "string"
            },
            {
              "id": "inactive-days",
              "name": "inactiveDays",
              "value": "={{ $json.body.inactiveDays }}",
              "type": "number"
            },
            {
              "id": "dc-name",
              "name": "dcName",
              "value": "={{ $json.body.dcName }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "7221c40e-6727-4509-9101-63a9b025deed",
      "name": "Extract Report Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -32,
        -32
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "#inactive-accounts",
          "mode": "name"
        },
        "text": "={{ $json.totalInactive > 0 ? '‚ö†Ô∏è' : '‚úÖ' }} *Weekly Inactive Users Report*\n\n‚Ä¢ *Date:* {{ $json.scanDate }}\n‚Ä¢ *Threshold:* {{ $json.inactiveDays }} days\n‚Ä¢ *DC:* {{ $json.dcName }}\n{{ $json.totalInactive > 0 ? '‚óâ *Total Disabled users:* ' + $json.totalInactive + '\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n' + JSON.parse($json.inactiveUsers).map(u => 'üîí *' + (u.displayName || u.samAccountName) + '* (' + u.samAccountName + ')\\n    Last logon: ' + u.lastLogon + (u.daysSinceLogon !== 'N/A' ? ' (' + u.daysSinceLogon + ' days)' : '') + '\\n    ‚Üí Disabled & moved to Disabled Users group').join('\\n\\n') + '\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ' : '\\n‚úÖ All accounts are active. No action taken.' }}",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "id": "fd340869-36a6-4b6e-b1e2-71df526ce655",
      "name": "Slack - Inactive Users Report",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        208,
        -32
      ],
      "webhookId": "ac1330b1-d3b1-454b-8891-5a9a03f5cef1",
      "credentials": {
        "slackApi": {
          "id": "obEYVo8oQOJ22JqX",
          "name": "AD Admin Bot"
        }
      }
    }
  ],
  "connections": {
    "Webhook - Receive Report": {
      "main": [
        [
          {
            "node": "Verify Secret",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verify Secret": {
      "main": [
        [
          {
            "node": "Extract Report Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Report Data": {
      "main": [
        [
          {
            "node": "Slack - Inactive Users Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "c965c9fe-3a13-4c5f-bb43-85eac5dbabdd",
  "activeVersionId": "c965c9fe-3a13-4c5f-bb43-85eac5dbabdd",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2026-02-20T10:59:54.709Z",
      "createdAt": "2026-02-20T10:59:54.709Z",
      "role": "workflow:owner",
      "workflowId": "D5gpGPiDZNKHYBCN",
      "projectId": "pWTWmuHnmIHw48U9"
    }
  ],
  "activeVersion": {
    "updatedAt": "2026-02-20T12:31:08.000Z",
    "createdAt": "2026-02-20T12:31:05.425Z",
    "versionId": "c965c9fe-3a13-4c5f-bb43-85eac5dbabdd",
    "workflowId": "D5gpGPiDZNKHYBCN",
    "nodes": [
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "inactive-users-report",
          "options": {}
        },
        "id": "12137e81-5512-4870-acdf-4bae49c74ff8",
        "name": "Webhook - Receive Report",
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2,
        "position": [
          -512,
          -32
        ],
        "webhookId": "inactive-users-report"
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 1
            },
            "conditions": [
              {
                "id": "verify-secret",
                "leftValue": "={{ $json.body.secret }}",
                "rightValue": "n8w-GmC9x$kQ2vLpR7fT4bYe!Aj6Xs8Z",
                "operator": {
                  "type": "string",
                  "operation": "equals"
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "id": "81071f86-e1e7-4015-bf9c-dde85157591a",
        "name": "Verify Secret",
        "type": "n8n-nodes-base.filter",
        "typeVersion": 2,
        "position": [
          -272,
          -32
        ]
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "total",
                "name": "totalInactive",
                "value": "={{ $json.body.totalInactive }}",
                "type": "number"
              },
              {
                "id": "users",
                "name": "inactiveUsers",
                "value": "={{ JSON.stringify($json.body.inactiveUsers) }}",
                "type": "string"
              },
              {
                "id": "scan-date",
                "name": "scanDate",
                "value": "={{ $json.body.scanDate }}",
                "type": "string"
              },
              {
                "id": "search-base",
                "name": "searchBase",
                "value": "={{ $json.body.searchBase }}",
                "type": "string"
              },
              {
                "id": "inactive-days",
                "name": "inactiveDays",
                "value": "={{ $json.body.inactiveDays }}",
                "type": "number"
              },
              {
                "id": "dc-name",
                "name": "dcName",
                "value": "={{ $json.body.dcName }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "id": "7221c40e-6727-4509-9101-63a9b025deed",
        "name": "Extract Report Data",
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          -32,
          -32
        ]
      },
      {
        "parameters": {
          "select": "channel",
          "channelId": {
            "__rl": true,
            "value": "#inactive-accounts",
            "mode": "name"
          },
          "text": "={{ $json.totalInactive > 0 ? '‚ö†Ô∏è' : '‚úÖ' }} *Weekly Inactive Users Report*\n\n‚Ä¢ *Date:* {{ $json.scanDate }}\n‚Ä¢ *Threshold:* {{ $json.inactiveDays }} days\n‚Ä¢ *DC:* {{ $json.dcName }}\n{{ $json.totalInactive > 0 ? '‚óâ *Total Disabled users:* ' + $json.totalInactive + '\\n\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\\n' + JSON.parse($json.inactiveUsers).map(u => 'üîí *' + (u.displayName || u.samAccountName) + '* (' + u.samAccountName + ')\\n    Last logon: ' + u.lastLogon + (u.daysSinceLogon !== 'N/A' ? ' (' + u.daysSinceLogon + ' days)' : '') + '\\n    ‚Üí Disabled & moved to Disabled Users group').join('\\n\\n') + '\\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ' : '\\n‚úÖ All accounts are active. No action taken.' }}",
          "otherOptions": {
            "includeLinkToWorkflow": false
          }
        },
        "id": "fd340869-36a6-4b6e-b1e2-71df526ce655",
        "name": "Slack - Inactive Users Report",
        "type": "n8n-nodes-base.slack",
        "typeVersion": 2.2,
        "position": [
          208,
          -32
        ],
        "webhookId": "ac1330b1-d3b1-454b-8891-5a9a03f5cef1",
        "credentials": {
          "slackApi": {
            "id": "obEYVo8oQOJ22JqX",
            "name": "AD Admin Bot"
          }
        }
      }
    ],
    "connections": {
      "Webhook - Receive Report": {
        "main": [
          [
            {
              "node": "Verify Secret",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Verify Secret": {
        "main": [
          [
            {
              "node": "Extract Report Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Extract Report Data": {
        "main": [
          [
            {
              "node": "Slack - Inactive Users Report",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "authors": "Alex Vinokur",
    "name": "Version c965c9fe",
    "description": "",
    "autosaved": true
  },
  "tags": []
}