{
  "updatedAt": "2026-02-19T16:56:03.578Z",
  "createdAt": "2026-02-19T16:22:28.652Z",
  "id": "uyiPDLjeIQmcJtqM",
  "name": "AD Group Membership Change â†’ Slack Alert (Add/Remove + Auto-Disable)",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "group-membership-change",
        "options": {}
      },
      "id": "657b5b5b-34f4-4704-be3c-31a3220cf14d",
      "name": "Webhook - Receive DC Event",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -1584,
        -224
      ],
      "webhookId": "group-membership-change"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "verify-secret",
              "leftValue": "={{ $json.body.secret }}",
              "rightValue": "CHANGE_ME_TO_A_RANDOM_SECRET",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8f4c24c9-868f-4e1b-91f2-87ce711d9b07",
      "name": "Verify Shared Secret",
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2,
      "position": [
        -1360,
        -224
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "action-type",
              "name": "actionType",
              "value": "={{ $json.body.actionType }}",
              "type": "string"
            },
            {
              "id": "affected-user",
              "name": "affectedUser",
              "value": "={{ $json.body.affectedUser }}",
              "type": "string"
            },
            {
              "id": "group-name",
              "name": "groupName",
              "value": "={{ $json.body.groupName }}",
              "type": "string"
            },
            {
              "id": "group-domain",
              "name": "groupDomain",
              "value": "={{ $json.body.groupDomain }}",
              "type": "string"
            },
            {
              "id": "performed-by",
              "name": "performedBy",
              "value": "={{ $json.body.performedBy }}",
              "type": "string"
            },
            {
              "id": "event-id",
              "name": "eventId",
              "value": "={{ $json.body.eventId }}",
              "type": "number"
            },
            {
              "id": "timestamp",
              "name": "timestamp",
              "value": "={{ $json.body.timestamp }}",
              "type": "string"
            },
            {
              "id": "dc-name",
              "name": "dcName",
              "value": "={{ $json.body.dcName }}",
              "type": "string"
            },
            {
              "id": "auto-disabled",
              "name": "autoDisabled",
              "value": "={{ $json.body.autoDisabled }}",
              "type": "boolean"
            },
            {
              "id": "auto-disable-error",
              "name": "autoDisableError",
              "value": "={{ $json.body.autoDisableError }}",
              "type": "string"
            },
            {
              "id": "event-type-label",
              "name": "eventTypeLabel",
              "value": "={{ {4728: 'Global Group', 4732: 'Local Group', 4756: 'Universal Group', 4729: 'Global Group', 4733: 'Local Group', 4757: 'Universal Group'}[$json.body.eventId] || 'Unknown' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "708d25f9-d948-44a8-adf9-77b6eb69ea68",
      "name": "Extract Event Details",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1136,
        -224
      ]
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "conditions": [
                  {
                    "leftValue": "={{ $json.actionType }}",
                    "rightValue": "MEMBER_ADDED",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              },
              "renameOutput": "Member Added"
            },
            {
              "conditions": {
                "conditions": [
                  {
                    "leftValue": "={{ $json.actionType }}",
                    "rightValue": "MEMBER_REMOVED",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ]
              },
              "renameOutput": "Member Removed"
            }
          ]
        },
        "options": {}
      },
      "id": "5510da7f-f8bb-45f1-84d9-5bf94e4f3f54",
      "name": "Switch: Add or Remove",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -912,
        -224
      ]
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "#security-alerts",
          "mode": "name"
        },
        "text": " ",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "id": "0f63ae28-8c8e-493d-96fd-1e54aa640963",
      "name": "Slack - Member Added Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        -656,
        -320
      ],
      "webhookId": "435bf4be-6b91-4e93-b0fe-9556e95d97a6"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "#security-alerts",
          "mode": "name"
        },
        "text": " ",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "id": "f66f9619-197f-4a99-99a9-5ad34f76fde2",
      "name": "Slack - Member Removed Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        -656,
        -96
      ],
      "webhookId": "43db61e2-7cee-4b68-8c3a-8800d98f1acc"
    }
  ],
  "connections": {
    "Webhook - Receive DC Event": {
      "main": [
        [
          {
            "node": "Verify Shared Secret",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verify Shared Secret": {
      "main": [
        [
          {
            "node": "Extract Event Details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Event Details": {
      "main": [
        [
          {
            "node": "Switch: Add or Remove",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch: Add or Remove": {
      "main": [
        [
          {
            "node": "Slack - Member Added Alert",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Slack - Member Removed Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "fd128baf-c1d5-4988-b2c5-a9cbf702b56a",
  "activeVersionId": null,
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2026-02-19T16:22:28.659Z",
      "createdAt": "2026-02-19T16:22:28.659Z",
      "role": "workflow:owner",
      "workflowId": "uyiPDLjeIQmcJtqM",
      "projectId": "pWTWmuHnmIHw48U9"
    }
  ],
  "activeVersion": null,
  "tags": []
}